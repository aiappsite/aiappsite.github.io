import{d as j,m as V,S as z,A as E,a2 as I,p as N,w as q,v as O,u as F,L as U,s as X,b as Y,q as G,r as P,a5 as D,X as J,y as K,c as m,a6 as Q,Y as W,_ as Z,e as p,R as H,g as n,i as o,k as A,t as l,F as x,j as tt,C as L,H as M,l as R,h as a,D as y,E as et,f as s}from"./8e44304b.js";import{T as ot,u as st}from"./342fb198.js";import{C as nt}from"./28d28cc8.js";import{P as at}from"./2621960c.js";import"https://unpkg.com/@waline/client@v2/dist/waline.mjs";const it=j({name:"ARPost",components:{Sidebar:V,Toc:ot,Comment:nt,SubTitle:z,ArticleCard:E,Profile:I,SvgIcon:N,PostStats:at},setup(){const t=q(),r=O(),g=F(),f=U(),c=X(),C=Y(),{t:i}=G(),u=P(new D),d=P(!0),h=P(),{enabledCommentPlugin:w}=J(),{initializeLightBox:_}=st(),v=async()=>{var T,$;d.value=!0,u.value=new D,window.scrollTo({top:0});let e=String(c.params.slug);e=e.indexOf(",")?e.replace(/[,]+/g,"/"):e,await r.fetchPost(e).then(B=>{u.value=B,t.setTitle(u.value.title),f.setHeaderImage(B.cover),d.value=!1}),g.hexoConfig.writing.highlight.enable&&console.warn("[Aurora Config Error]: Please turn off [Hightlightjs]."),g.hexoConfig.writing.prismjs.enable&&console.warn("[Aurora Config Error]: Please turn off [prismjs]. "),await W(),_(),(T=h.value)==null||T.getCommentCount(),($=h.value)==null||$.getPostView()};K(()=>c.params,e=>{e.slug&&c.fullPath.indexOf("#")===-1&&v()});const b=e=>{e===""&&(e=window.location.href),window.location.href=e},k=e=>{C.push({name:"post-search",query:{tag:e}})},S=e=>{C.push({name:"post-search",query:{category:e}})};return console.log("currentPath",c.path),{avatarClasses:m(()=>({"hover:opacity-50 cursor-pointer":!0,[g.themeConfig.theme.profile_shape]:!0})),isMobile:m(()=>f.isMobile),currentPath:m(()=>c.path),isReport:m(()=>c.path.indexOf("/post/report")===0),pluginConfigs:m(()=>g.themeConfig.plugins),enabledComment:m(()=>u.value.comments&&w.value.plugin!==""),postStatsRef:h,SvgTypes:Q,commonStore:f,fetchData:v,handleAuthorClick:b,navigateToTag:k,navigateToCategory:S,loading:d,post:u,t:i}},mounted(){this.fetchData()},beforeUnmount(){this.commonStore.resetHeaderImage()}});const lt={class:"flex flex-col mt-20"},rt={class:"post-header"},pt={class:"post-labels"},ct={key:2},ut=["onClick"],dt=o("em",{class:"opacity-50"},"#",-1),ht={key:2},mt=o("b",{class:"opacity-50"},"#",-1),gt={key:0,class:"post-title text-white"},ft={class:"flex flex-row items-center justify-start mt-8 mb-4"},vt={key:0,class:"post-footer"},yt=["alt"],Ct={class:"text-white opacity-80"},wt={class:"opacity-70"},_t={key:1,class:"post-footer"},bt={class:"flex flex-row items-center"},kt={class:"text-ob-dim mt-1"},St=["innerHTML"],Tt={key:1,class:"bg-ob-deep-800 px-14 py-16 rounded-2xl shadow-xl block min-h-screen"},Pt=o("br",null,null,-1),At=o("br",null,null,-1),Rt=o("br",null,null,-1),$t={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols2 gap-6 mt-6"},Bt={key:0,class:"flex flex-col w-full h-full mr-0 lg:mr-4"},Dt={key:1,class:"flex flex-col w-full h-full"},Ht={key:2,id:"comments"},Lt={key:0};function Mt(t,r,g,f,c,C){const i=p("ob-skeleton"),u=p("PostStats"),d=p("SubTitle"),h=p("ArticleCard"),w=p("Comment"),_=p("Profile"),v=p("Toc"),b=p("Sidebar"),k=H("lazy"),S=H("scroll-spy");return s(),n("div",lt,[o("div",{class:R(["main-grid",{"main-report-header":t.isReport}])},[o("div",rt,[o("span",pt,[t.loading?(s(),A(i,{key:0,tag:"b",height:"20px",width:"35px"})):!t.loading&&t.post.categories&&t.post.categories.length>0?(s(),n("b",{key:1,onClick:r[0]||(r[0]=e=>t.navigateToCategory(t.post.categories[0].slug))},[o("span",null,l(t.post.categories[0].name),1)])):(s(),n("b",ct,l(t.t("settings.default-category")),1)),o("ul",null,[t.loading?(s(),A(i,{key:0,count:2,tag:"li",height:"16px",width:"35px",class:"mr-2"})):!t.loading&&t.post.tags&&t.post.tags.length>0?(s(!0),n(x,{key:1},tt(t.post.tags,e=>(s(),n("li",{key:e.slug,onClick:T=>t.navigateToTag(e.slug)},[dt,L(" "+l(e.name),1)],8,ut))),128)):(s(),n("li",ht,[mt,L(" "+l(t.t("settings.default-tag")),1)]))])]),t.post.title?(s(),n("h1",gt,l(t.post.title),1)):(s(),A(i,{key:1,class:"post-title text-white uppercase",width:"100%",height:"clamp(1.2rem, calc(1rem + 3.5vw), 4rem)"})),o("div",ft,[t.post.author&&t.post.count_time.symbolsTime?(s(),n("div",vt,[M(o("img",{class:R(t.avatarClasses),alt:`author-${t.post.author.name}`,onClick:r[1]||(r[1]=e=>t.handleAuthorClick(t.post.author.link))},null,10,yt),[[k,t.post.author.avatar||""]]),o("span",Ct,[o("strong",{class:"text-white pr-1.5 hover:opacity-50 cursor-pointer",onClick:r[2]||(r[2]=e=>t.handleAuthorClick(t.post.author.link))},l(t.post.author.name),1),o("span",wt,l(t.t("settings.shared-on"))+" "+l(t.t(t.post.date.month))+" "+l(t.post.date.day)+", "+l(t.post.date.year),1)])])):(s(),n("div",_t,[o("div",bt,[a(i,{class:"mr-2",height:"28px",width:"28px",circle:!0}),o("span",kt,[a(i,{height:"20px",width:"150px"})])])])),a(u,{"post-word-count":t.post.count_time.symbolsCount,"post-time-count":t.post.count_time.symbolsTime,"post-title":t.post.title,"current-path":t.currentPath,"plugin-configs":t.pluginConfigs,comments:t.enabledComment,ref:"postStatsRef"},null,8,["post-word-count","post-time-count","post-title","current-path","plugin-configs","comments"])])])],2),o("div",{class:R(["main-grid",{"main-report-content":t.isReport}])},[o("div",null,[t.post.content?M((s(),n("div",{key:0,class:"post-html",innerHTML:t.post.content},null,8,St)),[[S,{sectionSelector:"h1, h2, h3, h4, h5, h6"}]]):(s(),n("div",Tt,[a(i,{tag:"div",count:1,height:"36px",width:"150px",class:"mb-6"}),Pt,a(i,{tag:"div",count:35,height:"16px",width:"100px",class:"mr-2"}),At,Rt,a(i,{tag:"div",count:25,height:"16px",width:"100px",class:"mr-2"})])),o("div",$t,[t.post.prev_post.title?(s(),n("div",Bt,[a(d,{title:"settings.paginator.prev",icon:"arrow-left-circle"}),a(h,{data:t.post.prev_post},null,8,["data"])])):y("",!0),t.post.next_post.title?(s(),n("div",Dt,[a(d,{title:"settings.paginator.next",side:t.isMobile?"left":"right",icon:"arrow-right-circle"},null,8,["side"]),a(h,{data:t.post.next_post},null,8,["data"])])):y("",!0)]),t.enabledComment&&t.post.title&&t.post.text&&t.post.uid?(s(),n("div",Ht,[a(w,{title:t.post.title,body:t.post.text,uid:t.post.uid},null,8,["title","body","uid"])])):y("",!0)]),t.isReport?y("",!0):(s(),n("div",Lt,[a(b,null,{default:et(()=>[a(_,{author:t.post.author.slug||""},null,8,["author"]),a(v,{toc:t.post.toc,comments:t.enabledComment},null,8,["toc","comments"])]),_:1})]))],2)])}const Nt=Z(it,[["render",Mt]]);export{Nt as default};
